{"ast":null,"code":"import _slicedToArray from\"C:/Users/Shubham/whatsapp-clone/node_modules/babel-preset-react-app/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Avatar}from'@material-ui/core';import'./SidebarChat.css';import db from'./firebase';import{Link}from\"react-router-dom\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function SidebarChat(_ref){var _messages$;var id=_ref.id,name=_ref.name,addNewChat=_ref.addNewChat;var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),seed=_useState2[0],setSeed=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),messages=_useState4[0],setMessages=_useState4[1];useEffect(function(){if(id){db.collection('rooms').doc(id).collection('messages').orderBy('timestamp','desc').onSnapshot(function(snapshot){return setMessages(snapshot.docs.map(function(doc){return doc.data();}));});}},[id]);useEffect(function(){setSeed(Math.floor(Math.random()*5000));},[]);var createChat=function createChat(){var roomName=prompt(\"Please enter name for chat\");if(roomName){//some database stuff\ndb.collection(\"rooms\").add({name:roomName});}};return!addNewChat?/*#__PURE__*/_jsx(Link,{to:\"/rooms/\".concat(id),children:/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat\",children:[/*#__PURE__*/_jsx(Avatar,{src:\"https://avatars.dicebear.com/api/human/\".concat(seed,\".svg\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"sidebarChat__info\",children:[/*#__PURE__*/_jsx(\"h2\",{children:name}),/*#__PURE__*/_jsx(\"p\",{children:(_messages$=messages[0])===null||_messages$===void 0?void 0:_messages$.message})]})]})}):/*#__PURE__*/_jsx(\"div\",{onClick:createChat,className:\"sidebarChat\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add New Chat\"})});}export default SidebarChat;","map":{"version":3,"sources":["C:/Users/Shubham/whatsapp-clone/src/SidebarChat.js"],"names":["React","useState","useEffect","Avatar","db","Link","SidebarChat","id","name","addNewChat","seed","setSeed","messages","setMessages","collection","doc","orderBy","onSnapshot","snapshot","docs","map","data","Math","floor","random","createChat","roomName","prompt","add","message"],"mappings":"sJAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA0C,OAA1C,CACA,OAASC,MAAT,KAAuB,mBAAvB,CACA,MAAO,mBAAP,CACA,MAAOC,CAAAA,EAAP,KAAe,YAAf,CACA,OAASC,IAAT,KAAqB,kBAArB,C,wFAEA,QAASC,CAAAA,WAAT,MAA6C,mBAAvBC,CAAAA,EAAuB,MAAvBA,EAAuB,CAAnBC,IAAmB,MAAnBA,IAAmB,CAAbC,UAAa,MAAbA,UAAa,CAEzC,cAAwBR,QAAQ,CAAC,EAAD,CAAhC,wCAAOS,IAAP,eAAaC,OAAb,eACA,eAA+BV,QAAQ,CAAC,EAAD,CAAvC,yCAAMW,QAAN,eAAgBC,WAAhB,eAEAX,SAAS,CAAC,UAAM,CACZ,GAAGK,EAAH,CAAO,CACHH,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBC,GAAvB,CAA2BR,EAA3B,EAA+BO,UAA/B,CAA0C,UAA1C,EAAsDE,OAAtD,CAA8D,WAA9D,CAA2E,MAA3E,EAAmFC,UAAnF,CAA8F,SAACC,QAAD,QAAcL,CAAAA,WAAW,CAACK,QAAQ,CAACC,IAAT,CAAcC,GAAd,CAAkB,SAACL,GAAD,QAASA,CAAAA,GAAG,CAACM,IAAJ,EAAT,EAAlB,CAAD,CAAzB,EAA9F,EAEH,CACJ,CALQ,CAKN,CAACd,EAAD,CALM,CAAT,CAOAL,SAAS,CAAC,UAAM,CACZS,OAAO,CAACW,IAAI,CAACC,KAAL,CAAWD,IAAI,CAACE,MAAL,GAAgB,IAA3B,CAAD,CAAP,CACH,CAFQ,CAEN,EAFM,CAAT,CAKA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACtB,GAAMC,CAAAA,QAAQ,CAAGC,MAAM,CAAC,4BAAD,CAAvB,CAEA,GAAGD,QAAH,CAAa,CACT;AAEAtB,EAAE,CAACU,UAAH,CAAc,OAAd,EAAuBc,GAAvB,CAA2B,CACvBpB,IAAI,CAAEkB,QADiB,CAA3B,EAGH,CACH,CAVD,CAYA,MAAO,CAACjB,UAAD,cACF,KAAC,IAAD,EAAM,EAAE,kBAAYF,EAAZ,CAAR,uBACE,aAAK,SAAS,CAAC,aAAf,wBACA,KAAC,MAAD,EAAQ,GAAG,kDAA4CG,IAA5C,QAAX,EADA,cAEA,aAAK,SAAS,CAAC,mBAAf,wBACI,oBAAKF,IAAL,EADJ,cAEI,+BAAII,QAAQ,CAAC,CAAD,CAAZ,qCAAI,WAAaiB,OAAjB,EAFJ,GAFA,GADF,EADE,cAcH,YAAK,OAAO,CAAEJ,UAAd,CACA,SAAS,CAAC,aADV,uBAEI,oCAFJ,EAdJ,CAmBH,CAED,cAAenB,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect} from 'react';\r\nimport { Avatar } from '@material-ui/core';\r\nimport './SidebarChat.css';\r\nimport db from './firebase'; \r\nimport { Link } from \"react-router-dom\";\r\n\r\nfunction SidebarChat({id, name, addNewChat}) {\r\n\r\n    const [seed, setSeed] = useState(\"\");\r\n    const[messages, setMessages] = useState(\"\");\r\n\r\n    useEffect(() => {\r\n        if(id) {\r\n            db.collection('rooms').doc(id).collection('messages').orderBy('timestamp', 'desc').onSnapshot((snapshot) => setMessages(snapshot.docs.map((doc) => doc.data()))\r\n            );\r\n        }\r\n    }, [id]);\r\n\r\n    useEffect(() => {\r\n        setSeed(Math.floor(Math.random() * 5000));\r\n    }, []);\r\n\r\n\r\n    const createChat = () => {\r\n       const roomName = prompt(\"Please enter name for chat\");\r\n       \r\n       if(roomName) {\r\n           //some database stuff\r\n\r\n           db.collection(\"rooms\").add({\r\n               name: roomName,\r\n           });\r\n       }\r\n    };\r\n\r\n    return !addNewChat ? (\r\n         <Link to={`/rooms/${id}`}>\r\n           <div className=\"sidebarChat\">\r\n           <Avatar src={`https://avatars.dicebear.com/api/human/${seed}.svg`} />\r\n           <div className=\"sidebarChat__info\">\r\n               <h2>{name}</h2>\r\n               <p>{messages[0]?.message}</p>\r\n           </div>\r\n        </div>\r\n\r\n         </Link>\r\n\r\n      \r\n    ) : (\r\n        <div onClick={createChat}\r\n        className=\"sidebarChat\">\r\n            <h2>Add New Chat</h2>\r\n        </div>\r\n         );\r\n}\r\n\r\nexport default SidebarChat;\r\n"]},"metadata":{},"sourceType":"module"}